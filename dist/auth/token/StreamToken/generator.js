function _0xd5a3(){const _0xc60af5=['ex1','6lQViXq','putUnsignedShort','16PtgbhO','channel','6559620HwNMjo','checkInit','convertTokenString','terminalIP','cno','1926174shOqJU','now','deviceSerial','../TokenType','sig','putByte','ex2','putLong','TOKEN_PREFIX','actionType','app','toString','generateToken','putString','version','getSignatureFields','isUseOnceOnly','toTencentBase64','checkExpire','nullToEmpty','21686bOYBDz','1165VGVHCY','putUnsignedInt','notBlank','Stream','getParamsCodec','7SLpaAp','../TokenGenerator','time','687771EEpqtc','9322159wxZqdf','random','toSignString','secretKeySpec','notNull','476514dOvZEv','abs','8872KLJFtl'];_0xd5a3=function(){return _0xc60af5;};return _0xd5a3();}const _0x37080e=_0x40ee;(function(_0x18f828,_0xdcb0f3){const _0xd10cc3=_0x40ee,_0x5ba2a4=_0x18f828();while(!![]){try{const _0x2704c8=-parseInt(_0xd10cc3(0x149))/0x1*(-parseInt(_0xd10cc3(0x166))/0x2)+-parseInt(_0xd10cc3(0x13f))/0x3+parseInt(_0xd10cc3(0x147))/0x4*(parseInt(_0xd10cc3(0x167))/0x5)+-parseInt(_0xd10cc3(0x152))/0x6*(parseInt(_0xd10cc3(0x16c))/0x7)+-parseInt(_0xd10cc3(0x14b))/0x8*(-parseInt(_0xd10cc3(0x145))/0x9)+-parseInt(_0xd10cc3(0x14d))/0xa+parseInt(_0xd10cc3(0x140))/0xb;if(_0x2704c8===_0xdcb0f3)break;else _0x5ba2a4['push'](_0x5ba2a4['shift']());}catch(_0x241290){_0x5ba2a4['push'](_0x5ba2a4['shift']());}}}(_0xd5a3,0x50505));let TokenGenerator=require(_0x37080e(0x16d)),BufferedEncoder=require('../BufferedEncoder'),TokenType=require(_0x37080e(0x155)),VERSION='1.0',SIGN_FIELDS=['sn','rc',_0x37080e(0x148),_0x37080e(0x158),_0x37080e(0x16e),'st','ip','rnd',_0x37080e(0x15c)];class StreamTokenGenerator extends TokenGenerator{constructor(){super();}[_0x37080e(0x161)](){return SIGN_FIELDS;}[_0x37080e(0x16b)](){const _0x914319=_0x37080e;let _0x56b0b5=this;return{'tokenType':TokenType[_0x914319(0x16a)],'encode':function(_0x3fac6c){const _0x2f2e52=_0x914319;var _0x128f7e=new BufferedEncoder(0x400),_0x3fac6c=(_0x128f7e[_0x2f2e52(0x157)](this['getTokenType']()['code']),_0x128f7e[_0x2f2e52(0x15f)](_0x3fac6c['ver']),_0x128f7e[_0x2f2e52(0x15f)](_0x3fac6c[_0x2f2e52(0x151)]),_0x128f7e[_0x2f2e52(0x15f)](_0x3fac6c['rc']),_0x128f7e['putUnsignedInt'](_0x3fac6c[_0x2f2e52(0x148)]),_0x128f7e[_0x2f2e52(0x168)](_0x3fac6c[_0x2f2e52(0x158)]),_0x128f7e[_0x2f2e52(0x168)](_0x3fac6c['time']),_0x128f7e[_0x2f2e52(0x14a)](_0x3fac6c['st']),_0x128f7e[_0x2f2e52(0x15f)](_0x3fac6c['ip']),_0x128f7e[_0x2f2e52(0x159)](_0x3fac6c['rnd']),_0x128f7e[_0x2f2e52(0x15f)](_0x3fac6c[_0x2f2e52(0x156)]),_0x128f7e['putData'](_0x3fac6c['#']),_0x128f7e['putString'](_0x3fac6c[_0x2f2e52(0x15c)]),_0x128f7e['toByteArray']());return _0x56b0b5[_0x2f2e52(0x163)](_0x3fac6c[_0x2f2e52(0x15d)]('base64'));},'getTokenType':function(){return this['tokenType'];}};}[_0x37080e(0x15e)](_0xbe274a){const _0x5c3c63=_0x37080e;var _0x3526dd=Math['floor'](Date[_0x5c3c63(0x153)]()/0x3e8);if(_0xbe274a[_0x5c3c63(0x16e)]){if(0x12c<Math[_0x5c3c63(0x146)](_0xbe274a[_0x5c3c63(0x16e)]-_0x3526dd))throw new Error('请正确设置当前时间，或者干脆不要设置。注意时间的单位是秒而不是毫秒。');}else _0xbe274a[_0x5c3c63(0x16e)]=_0x3526dd;return _0x3526dd=!!_0xbe274a[_0x5c3c63(0x162)],_0xbe274a={'ver':this[_0x5c3c63(0x169)](VERSION,0xa,_0x5c3c63(0x160)),'sn':this[_0x5c3c63(0x169)](_0xbe274a[_0x5c3c63(0x154)],0x46,_0x5c3c63(0x154)),'cno':this['notBlank'](_0xbe274a[_0x5c3c63(0x14c)],0x8,_0x5c3c63(0x14c)),'rc':this[_0x5c3c63(0x165)](_0xbe274a['resourceCatagory'],0xc),'ex1':this[_0x5c3c63(0x164)](_0xbe274a['expire'],_0x3526dd),'ex2':this[_0x5c3c63(0x164)](_0xbe274a['expire2']||0x76a700,!0x1),'time':_0xbe274a[_0x5c3c63(0x16e)],'st':this[_0x5c3c63(0x144)](_0xbe274a[_0x5c3c63(0x15b)],'actionType'),'ip':this[_0x5c3c63(0x165)](_0xbe274a[_0x5c3c63(0x150)],0x10),'app':this[_0x5c3c63(0x165)](_0xbe274a['appid'],0x20),'rnd':_0x3526dd?TokenGenerator[_0x5c3c63(0x141)]['nextLong']():0x0},_0x3526dd=this[_0x5c3c63(0x142)](_0xbe274a),(this[_0x5c3c63(0x14e)](),_0xbe274a[_0x5c3c63(0x156)]=this['generateSig'](_0x3526dd,this[_0x5c3c63(0x143)]),TokenGenerator[_0x5c3c63(0x15a)]+this[_0x5c3c63(0x14f)](_0xbe274a,!0x0));}}function _0x40ee(_0x4c60fb,_0x2c8fec){const _0xd5a3d2=_0xd5a3();return _0x40ee=function(_0x40eed0,_0x53ce50){_0x40eed0=_0x40eed0-0x13f;let _0x54a779=_0xd5a3d2[_0x40eed0];return _0x54a779;},_0x40ee(_0x4c60fb,_0x2c8fec);}module['exports']=StreamTokenGenerator;